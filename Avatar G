<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  <meta name="theme-color" content="#0b1020" />
  <meta name="description" content="Avatar G â€” áƒ¡áƒáƒ¥áƒáƒ áƒ—áƒ•áƒ”áƒšáƒáƒ¡ áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ AI áƒ›áƒ”áƒ“áƒ˜áƒ áƒáƒšáƒáƒ¢áƒ¤áƒáƒ áƒ›áƒ. Avatar, Image, Video, Voice, Music, Text áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ áƒ”áƒ áƒ— áƒ¡áƒ˜áƒ•áƒ áƒªáƒ”áƒ¨áƒ˜." />
  <meta name="keywords" content="AI, Avatar, Video, Voice, Music, Georgian AI, áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ AI, áƒ›áƒ”áƒ“áƒ˜áƒ áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ" />
  <meta property="og:title" content="Avatar G â€” AI Workspace" />
  <meta property="og:description" content="Georgian AI-powered Media Factory. Professional content generation in Georgian." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />

  <title>Avatar G â€” Georgian AI Workspace</title>

  <style>
    :root {
      --bg0: #060815;
      --bg1: #0b1020;
      --glass: rgba(255, 255, 255, .08);
      --stroke: rgba(255, 255, 255, .14);
      --strokeHover: rgba(34, 211, 238, .35);
      --text: #e5e7eb;
      --textBright: #f9fafb;
      --muted: #93a3b8;
      --shadow: 0 24px 80px rgba(0, 0, 0, .45);
      --shadowHover: 0 28px 90px rgba(0, 0, 0, .55);
      --radius: 18px;
      --radiusSm: 14px;
      --brand: #22d3ee;
      --brand2: #3b82f6;
      --brandGrad: linear-gradient(135deg, rgba(34, 211, 238, .95), rgba(59, 130, 246, .95));
      --ok: #22c55e;
      --warn: #f59e0b;
      --danger: #ef4444;
      --cardPad: 20px;
      --maxW: 1020px;
      --transition: all 0.24s cubic-bezier(0.4, 0, 0.2, 1);
      --transitionFast: all 0.16s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    html, body { height: 100%; overflow-x: hidden; }

    body {
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", Roboto, "Noto Sans Georgian", "Noto Sans", sans-serif;
      color: var(--text);
      background:
        radial-gradient(1100px 650px at 18% 8%, rgba(34, 211, 238, .24), transparent 58%),
        radial-gradient(950px 650px at 82% 18%, rgba(59, 130, 246, .20), transparent 58%),
        radial-gradient(950px 750px at 50% 85%, rgba(34, 197, 94, .12), transparent 62%),
        linear-gradient(180deg, var(--bg1) 0%, var(--bg0) 100%);
      background-attachment: fixed;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a { color: inherit; text-decoration: none; }
    button { font-family: inherit; cursor: pointer; border: none; outline: none; }
    input, textarea, select { font-family: inherit; }

    .wrap { width: min(var(--maxW), calc(100% - 28px)); margin: 0 auto; padding: 20px 0 48px; }

    .topbar {
      display: flex; align-items: center; justify-content: space-between; gap: 14px;
      padding: 16px 18px;
      border: 1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(255, 255, 255, .11), rgba(255, 255, 255, .07));
      border-radius: 999px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      margin-bottom: 24px;
      transition: var(--transition);
      position: sticky; top: 12px; z-index: 100;
    }
    .topbar:hover { border-color: var(--strokeHover); box-shadow: var(--shadowHover); }

    .brand { display: flex; align-items: center; gap: 12px; min-width: 0; cursor: pointer; transition: var(--transitionFast); }
    .brand:hover { transform: translateX(2px); }
    .brand:active { transform: scale(0.98); }

    .logo {
      width: 48px; height: 48px; border-radius: 15px;
      display: grid; place-items: center;
      background: var(--brandGrad);
      color: #071018;
      font-weight: 900;
      font-size: 20px;
      box-shadow: 0 14px 48px rgba(34, 211, 238, .22), inset 0 1px 0 rgba(255, 255, 255, .3);
      flex: 0 0 auto;
      transition: var(--transitionFast);
    }
    .brand:hover .logo { transform: rotate(-5deg) scale(1.05); }

    .brandtext { display: flex; flex-direction: column; min-width: 0; line-height: 1.2; }
    .title { font-weight: 800; letter-spacing: .3px; font-size: 16.5px; color: var(--textBright); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .subtitle { font-size: 12px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; }

    .right { display: flex; align-items: center; gap: 10px; flex: 0 0 auto; }

    .status {
      display: flex; align-items: center; gap: 8px;
      font-size: 12px; color: var(--muted);
      padding: 9px 12px;
      border: 1px solid var(--stroke);
      background: rgba(255, 255, 255, .06);
      border-radius: 999px;
      transition: var(--transitionFast);
    }
    .status:hover { background: rgba(255, 255, 255, .09); }
    .dot { width: 10px; height: 10px; border-radius: 999px; background: var(--warn); box-shadow: 0 0 0 4px rgba(245, 158, 11, .18); }
    .dot.ok { background: var(--ok); box-shadow: 0 0 0 4px rgba(34, 197, 94, .20), 0 0 12px rgba(34, 197, 94, .5); }
    .dot.bad { background: var(--danger); box-shadow: 0 0 0 4px rgba(239, 68, 68, .20), 0 0 12px rgba(239, 68, 68, .45); }

    .select { appearance: none; -webkit-appearance: none; border: 1px solid var(--stroke); background: rgba(255, 255, 255, .06);
      color: var(--text); border-radius: 12px; padding: 10px 38px 10px 14px; font-weight: 700; font-size: 13px;
      cursor: pointer; outline: none; min-width: 70px; transition: var(--transitionFast);
    }
    .select:hover { background: rgba(255, 255, 255, .09); border-color: var(--strokeHover); }
    .select:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(34, 211, 238, .15); }
    .selectWrap { position: relative; }
    .selectWrap:after { content: "â–¾"; position: absolute; right: 13px; top: 50%; transform: translateY(-50%); color: var(--muted); pointer-events: none; font-size: 13px; }

    .grid { margin-top: 18px; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }

    .card {
      border: 1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(255, 255, 255, .11), rgba(255, 255, 255, .07));
      border-radius: var(--radius);
      padding: var(--cardPad);
      box-shadow: 0 20px 75px rgba(0, 0, 0, .38);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      cursor: pointer;
      transition: var(--transition);
      user-select: none;
      position: relative;
      overflow: hidden;
      min-height: 115px;
    }
    .card:hover { transform: translateY(-3px); border-color: var(--strokeHover); box-shadow: 0 24px 90px rgba(0, 0, 0, .45); }
    .card:active { transform: translateY(-1px); }

    .cardTop { display: flex; align-items: flex-start; gap: 12px; }
    .icon { width: 42px; height: 42px; border-radius: var(--radiusSm); display: grid; place-items: center; background: rgba(255, 255, 255, .08); border: 1px solid var(--stroke); flex: 0 0 auto; font-size: 20px; transition: var(--transitionFast); }
    .card:hover .icon { transform: scale(1.08) rotate(-3deg); background: rgba(255, 255, 255, .11); }
    .card h3 { font-size: 16.5px; font-weight: 850; letter-spacing: .3px; color: var(--textBright); }
    .card p { margin: 7px 0 0; color: var(--muted); font-size: 13px; line-height: 1.4; }

    .badge {
      position: absolute; right: 16px; top: 16px;
      font-size: 10.5px; font-weight: 800;
      color: rgba(229, 231, 235, .95);
      padding: 6px 11px; border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255, 255, 255, .08);
      backdrop-filter: blur(8px);
      letter-spacing: .5px;
    }
    .badge.new { background: linear-gradient(135deg, rgba(34, 211, 238, .25), rgba(59, 130, 246, .25)); border-color: rgba(34, 211, 238, .3); color: var(--brand); }
    .badge.pro { background: linear-gradient(135deg, rgba(168, 85, 247, .25), rgba(217, 70, 239, .25)); border-color: rgba(168, 85, 247, .3); color: #c084fc; }
    .badge.safe { background: linear-gradient(135deg, rgba(34, 197, 94, .25), rgba(74, 222, 128, .25)); border-color: rgba(34, 197, 94, .3); color: #4ade80; }

    .wide { grid-column: 1 / -1; min-height: 105px; }

    .cta { margin: 22px auto 0; display: flex; flex-direction: column; align-items: center; gap: 14px; }
    .btn {
      font-weight: 900; font-size: 15px; letter-spacing: .3px;
      padding: 16px 28px; border-radius: var(--radiusSm);
      color: #051018; background: var(--brandGrad);
      box-shadow: 0 22px 75px rgba(34, 211, 238, .20), inset 0 1px 0 rgba(255, 255, 255, .3);
      transition: var(--transition);
      min-width: 200px; position: relative; overflow: hidden;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 28px 90px rgba(34, 211, 238, .28); }
    .btn:active { transform: translateY(0); }

    .creditPreview {
      font-size: 13px; color: var(--muted); text-align: center;
      padding: 10px 16px; background: rgba(255, 255, 255, .05);
      border: 1px solid var(--stroke); border-radius: 12px; max-width: 480px;
    }
    .creditPreview strong { color: var(--brand); font-weight: 700; }

    .footer { margin-top: 24px; text-align: center; color: rgba(147, 163, 184, .85); font-size: 12.5px; padding: 16px; }

    .overlay {
      position: fixed; inset: 0; background: rgba(0, 0, 0, .60);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      display: none; align-items: center; justify-content: center; padding: 20px;
      z-index: 1000;
    }
    .overlay.show { display: flex; }

    .modal {
      width: min(760px, 100%); max-height: 90vh; overflow-y: auto;
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(255, 255, 255, .13), rgba(255, 255, 255, .07));
      box-shadow: 0 32px 140px rgba(0, 0, 0, .60);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
    }

    .modalHead {
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      padding: 18px 20px; border-bottom: 1px solid var(--stroke);
      background: rgba(255, 255, 255, .04);
    }
    .modalTitle { display: flex; align-items: center; gap: 12px; min-width: 0; }
    .modalTitle strong { font-size: 15px; letter-spacing: .3px; color: var(--textBright); font-weight: 800; }
    .close {
      border: 1px solid var(--stroke); background: rgba(255, 255, 255, .06); color: var(--text);
      border-radius: 12px; width: 38px; height: 38px; display: grid; place-items: center;
      font-weight: 800; font-size: 18px; transition: var(--transitionFast);
    }
    .close:hover { background: rgba(239, 68, 68, .15); border-color: rgba(239, 68, 68, .3); color: var(--danger); transform: rotate(90deg); }

    .modalBody { padding: 20px; }
    .hint {
      color: var(--muted); font-size: 13px; margin: 0 0 16px; line-height: 1.5;
      padding: 12px 14px; background: rgba(34, 211, 238, .08); border-left: 3px solid var(--brand); border-radius: 8px;
    }

    .formGrid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .field { display: flex; flex-direction: column; gap: 7px; }
    label { font-size: 12.5px; color: var(--textBright); font-weight: 800; letter-spacing: .2px; }
    input, textarea, select {
      width: 100%;
      border: 1px solid var(--stroke);
      background: rgba(255, 255, 255, .06);
      color: var(--text);
      border-radius: var(--radiusSm);
      padding: 13px 14px;
      outline: none;
      font-size: 13.5px;
      transition: var(--transition);
    }
    input:focus, textarea:focus, select:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(34, 211, 238, .15); }
    input.error, textarea.error { border-color: var(--danger); box-shadow: 0 0 0 3px rgba(239, 68, 68, .15); }
    textarea { min-height: 110px; resize: vertical; line-height: 1.5; }
    .full { grid-column: 1 / -1; }

    .fileInput { position: relative; cursor: pointer; }
    .fileInput input[type="file"] { position: absolute; opacity: 0; width: 100%; height: 100%; cursor: pointer; }
    .fileLabel {
      display: flex; align-items: center; gap: 10px;
      padding: 13px 14px;
      border: 1px dashed var(--stroke);
      background: rgba(255, 255, 255, .04);
      border-radius: var(--radiusSm);
      transition: var(--transitionFast);
      font-size: 13px;
      color: var(--muted);
    }
    .fileInput:hover .fileLabel { border-color: var(--brand); background: rgba(34, 211, 238, .08); color: var(--text); }

    .filePreview {
      margin-top: 10px; padding: 10px 12px;
      background: rgba(34, 211, 238, .08);
      border: 1px solid rgba(34, 211, 238, .2);
      border-radius: 10px;
      font-size: 12px;
      color: var(--brand);
      display: none;
      gap: 8px;
      align-items: center;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .row { display: flex; gap: 12px; align-items: center; justify-content: flex-end; margin-top: 18px; flex-wrap: wrap; }
    .btn2 {
      border: 1px solid var(--stroke);
      background: rgba(255, 255, 255, .06);
      color: var(--text);
      border-radius: var(--radiusSm);
      padding: 13px 18px;
      font-weight: 900;
      font-size: 14px;
      transition: var(--transition);
      letter-spacing: .2px;
    }
    .btn2:hover { background: rgba(255, 255, 255, .10); border-color: var(--strokeHover); transform: translateY(-1px); }
    .btn2:active { transform: translateY(0); }

    .btnPrimary {
      border: 0; color: #051018; background: var(--brandGrad);
      box-shadow: 0 20px 65px rgba(34, 211, 238, .20);
      position: relative; overflow: hidden;
    }
    .btnPrimary:disabled { opacity: .55; cursor: not-allowed; transform: none !important; }

    .consentBox {
      display: flex; align-items: flex-start; gap: 10px;
      padding: 14px; background: rgba(245, 158, 11, .08);
      border: 1px solid rgba(245, 158, 11, .25);
      border-radius: 12px; cursor: pointer;
    }
    .consentBox input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; cursor: pointer; accent-color: var(--brand); }
    .consentBox label { font-size: 13px; line-height: 1.5; color: var(--text); font-weight: 600; cursor: pointer; flex: 1; }

    .resultBox {
      margin-top: 16px;
      border: 1px solid rgba(34, 211, 238, .25);
      background: rgba(34, 211, 238, .08);
      border-radius: 12px;
      padding: 12px 14px;
      display: none;
    }
    .resultBox .rTitle { font-weight: 900; color: var(--textBright); font-size: 13px; margin-bottom: 6px; }
    .resultBox pre {
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 12.8px;
      color: rgba(229, 231, 235, .95);
      line-height: 1.5;
    }

    .toast {
      position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%);
      background: rgba(11, 16, 32, .95);
      border: 1px solid var(--stroke);
      color: var(--text);
      padding: 14px 18px;
      border-radius: var(--radiusSm);
      font-size: 13.5px;
      font-weight: 600;
      box-shadow: 0 24px 100px rgba(0, 0, 0, .60);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      display: none;
      z-index: 1001;
      max-width: min(560px, calc(100% - 32px));
      text-align: center;
    }
    .toast.show { display: block; }
    .toast.success { border-color: rgba(34, 197, 94, .4); background: rgba(34, 197, 94, .15); color: var(--ok); }
    .toast.error { border-color: rgba(239, 68, 68, .4); background: rgba(239, 68, 68, .15); color: var(--danger); }
    .toast.warning { border-color: rgba(245, 158, 11, .4); background: rgba(245, 158, 11, .15); color: var(--warn); }

    .loading { position: relative; pointer-events: none; opacity: .75; }
    .loading::after {
      content: ''; position: absolute; top: 50%; left: 50%;
      width: 20px; height: 20px; margin: -10px 0 0 -10px;
      border: 2px solid transparent; border-top-color: var(--brand);
      border-radius: 50%; animation: spin .8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

    @media (max-width: 640px) {
      .wrap { padding: 16px 0 36px; }
      .topbar { padding: 14px 16px; flex-wrap: wrap; top: 8px; }
      .logo { width: 44px; height: 44px; }
      .title { font-size: 15px; }
      .subtitle { font-size: 11px; }
      .grid { grid-template-columns: 1fr; gap: 14px; }
      .wide { grid-column: auto; }
      .formGrid { grid-template-columns: 1fr; }
      .btn { width: 100%; }
      .row { justify-content: stretch; }
      .btn2 { flex: 1; }
      .modal { max-height: 85vh; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header class="topbar" role="banner">
      <div class="brand" role="button" aria-label="Avatar G Home" tabindex="0" id="homeBtn">
        <div class="logo" aria-hidden="true">G</div>
        <div class="brandtext">
          <div class="title" id="t_title">Avatar G â€” AI Workspace</div>
          <div class="subtitle" id="t_subtitle">Avatar â€¢ Image â€¢ Video â€¢ Voice â€¢ Music â€¢ Text</div>
        </div>
      </div>

      <div class="right">
        <div class="status" title="Service status" role="status" aria-live="polite">
          <span class="dot" id="dot" aria-hidden="true"></span>
          <span id="t_status">Checking...</span>
        </div>

        <div class="selectWrap" title="Language">
          <label for="lang" class="sr-only">áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ”áƒœáƒ / Select Language</label>
          <select class="select" id="lang" aria-label="Language selection">
            <option value="ka" selected>KA</option>
            <option value="en">EN</option>
          </select>
        </div>
      </div>
    </header>

    <main role="main">
      <section class="grid" aria-label="AI Services" id="servicesGrid">
        <div class="card" data-service="avatar" tabindex="0" role="button">
          <div class="badge new" id="b_avatar">NEW</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">ğŸ§‘â€ğŸ­</div>
            <div>
              <h3 id="t_avatar_h">Avatar</h3>
              <p id="t_avatar_p">áƒáƒ•áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ (áƒ¤áƒáƒ¢áƒ/áƒ•áƒ˜áƒ“áƒ”áƒ) + áƒ¡áƒ¢áƒ˜áƒšáƒ˜ + áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜</p>
            </div>
          </div>
        </div>

        <div class="card" data-service="image" tabindex="0" role="button">
          <div class="badge">AI</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">ğŸ–¼ï¸</div>
            <div>
              <h3 id="t_image_h">Image</h3>
              <p id="t_image_p">áƒ¤áƒáƒ¢áƒ/áƒ“áƒ˜áƒ–áƒáƒ˜áƒœáƒ˜áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ áƒ“áƒ áƒ áƒ”áƒ“áƒáƒ¥áƒ¢áƒ˜áƒ áƒ”áƒ‘áƒ</p>
            </div>
          </div>
        </div>

        <div class="card" data-service="video" tabindex="0" role="button">
          <div class="badge pro">PRO</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">ğŸ¬</div>
            <div>
              <h3 id="t_video_h">Video</h3>
              <p id="t_video_p">AI áƒ•áƒ˜áƒ“áƒ”áƒ áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ”áƒ‘áƒ˜, áƒ¨áƒáƒ áƒ¢áƒ”áƒ‘áƒ˜, áƒ áƒ˜áƒšáƒ¡áƒ”áƒ‘áƒ˜</p>
            </div>
          </div>
        </div>

        <div class="card" data-service="voice" tabindex="0" role="button">
          <div class="badge safe">SAFE</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">ğŸ¤</div>
            <div>
              <h3 id="t_voice_h">Voice</h3>
              <p id="t_voice_p">voiceover + áƒ®áƒ›áƒ˜áƒ¡ áƒ™áƒšáƒáƒœáƒ˜áƒ áƒ”áƒ‘áƒ (áƒ—áƒáƒœáƒ®áƒ›áƒáƒ‘áƒ˜áƒ—)</p>
            </div>
          </div>
        </div>

        <div class="card" data-service="music" tabindex="0" role="button">
          <div class="badge new">NEW</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">ğŸµ</div>
            <div>
              <h3 id="t_music_h">Music</h3>
              <p id="t_music_p">AI áƒ›áƒ£áƒ¡áƒ˜áƒ™áƒ˜áƒ¡ áƒ˜áƒ“áƒ”áƒ, áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜, mood & style</p>
            </div>
          </div>
        </div>

        <div class="card wide" data-service="text" tabindex="0" role="button">
          <div class="badge">FAST</div>
          <div class="cardTop">
            <div class="icon" aria-hidden="true">âœï¸</div>
            <div>
              <h3 id="t_text_h">Text</h3>
              <p id="t_text_p">áƒ™áƒáƒáƒ˜áƒ áƒáƒ˜áƒ—áƒ˜áƒœáƒ’áƒ˜, áƒáƒáƒ¡áƒ¢áƒ˜, áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜, CTA, áƒáƒ áƒáƒ›áƒ</p>
            </div>
          </div>
        </div>
      </section>

      <div class="cta">
        <button class="btn" id="demoBtn">áƒ“áƒáƒ˜áƒ¬áƒ§áƒ” Demo</button>
        <div class="creditPreview" id="t_creditPreview"><strong>100 áƒ£áƒ¤áƒáƒ¡áƒ áƒ™áƒ áƒ”áƒ“áƒ˜áƒ¢áƒ˜</strong> áƒ“áƒ”áƒ›áƒ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ¨áƒ˜</div>
      </div>

      <footer class="footer" role="contentinfo">
        <div id="t_footer">Â© 2026 <strong>Avatar G</strong> â€¢ Georgian AI Workspace</div>
        <div style="margin-top: 8px; font-size: 11.5px;">Made with â¤ï¸ in Georgia</div>
      </footer>
    </main>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" aria-labelledby="modalTitleText">
      <div class="modalHead">
        <div class="modalTitle">
          <span class="icon" id="modalIcon" aria-hidden="true">âœ¨</span>
          <strong id="modalTitleText">Service</strong>
        </div>
        <button class="close" id="closeBtn" aria-label="Close dialog">âœ•</button>
      </div>

      <div class="modalBody">
        <div class="hint" id="modalHint">áƒ¨áƒ”áƒáƒ•áƒ¡áƒ” áƒ›áƒáƒ™áƒšáƒ” áƒ“áƒ”áƒ¢áƒáƒšáƒ”áƒ‘áƒ˜ â€” áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ áƒ¬áƒáƒ•áƒ backend-áƒ–áƒ” áƒ“áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ‘ áƒáƒáƒ¡áƒ£áƒ®áƒ¡.</div>

        <form id="serviceForm" novalidate>
          <div class="formGrid">
            <div class="field">
              <label id="l_goal" for="goal">áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ *</label>
              <input id="goal" type="text" placeholder="áƒ›áƒáƒ’: Instagram Reel, áƒáƒ áƒáƒ“áƒ£áƒ¥áƒ¢áƒ˜áƒ¡ áƒáƒ áƒáƒ›áƒ..." required />
            </div>

            <div class="field">
              <label id="l_lang" for="outLang">áƒ”áƒœáƒ *</label>
              <select id="outLang" required>
                <option value="ka" selected>áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
                <option value="en">English</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
              </select>
            </div>

            <div class="field full">
              <label id="l_details" for="details">áƒ“áƒ”áƒ¢áƒáƒšáƒ”áƒ‘áƒ˜ / áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ *</label>
              <textarea id="details" placeholder="áƒ›áƒáƒ™áƒšáƒ”áƒ“ áƒáƒ¦áƒ¬áƒ”áƒ áƒ”: áƒ¡áƒ¢áƒ˜áƒšáƒ˜, áƒ¢áƒáƒœáƒ˜, áƒáƒ£áƒ“áƒ˜áƒ¢áƒáƒ áƒ˜áƒ, áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒ”áƒ‘áƒ˜â€¦" required></textarea>
            </div>

            <div class="field">
              <label id="l_files" for="files">áƒ¤áƒáƒ˜áƒšáƒ”áƒ‘áƒ˜ (áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜áƒ¡áƒáƒ›áƒ”áƒ‘áƒ )</label>
              <div class="fileInput">
                <input id="files" type="file" multiple accept="image/*,video/*,audio/*,.pdf,.docx" />
                <div class="fileLabel">
                  <span>ğŸ“</span>
                  <span id="fileText">áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ¤áƒáƒ˜áƒšáƒ”áƒ‘áƒ˜</span>
                </div>
              </div>
              <div id="filePreview" class="filePreview"></div>
            </div>

            <div class="field">
              <label id="l_notes" for="notes">áƒ¨áƒ”áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒ‘áƒ˜</label>
              <input id="notes" type="text" placeholder="áƒ›áƒáƒ’: brand colors, áƒšáƒáƒ’áƒ, áƒ“áƒ áƒ (6s/10s)â€¦" />
            </div>

            <div class="field full" id="consentWrap" style="display:none;">
              <div class="consentBox">
                <input type="checkbox" id="consent" />
                <label for="consent" id="t_consent">áƒ•áƒáƒ“áƒáƒ¡áƒ¢áƒ£áƒ áƒ”áƒ‘, áƒ áƒáƒ› áƒ®áƒ›áƒ˜áƒ¡ áƒ™áƒšáƒáƒœáƒ˜áƒ áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒáƒ¥áƒ•áƒ¡ áƒœáƒ”áƒ‘áƒáƒ áƒ—áƒ•áƒ (consent).</label>
              </div>
            </div>

            <div class="field full">
              <div class="resultBox" id="resultBox">
                <div class="rTitle" id="rTitle">AI áƒáƒáƒ¡áƒ£áƒ®áƒ˜</div>
                <pre id="resultText"></pre>
              </div>
            </div>
          </div>

          <div class="row">
            <button type="button" class="btn2" id="clearBtn">áƒ’áƒáƒ¡áƒ£áƒ¤áƒ—áƒáƒ•áƒ”áƒ‘áƒ</button>
            <button type="submit" class="btn2 btnPrimary" id="submitBtn">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="alert" aria-live="assertive">Done</div>

  <script>
    /******************************************************************
     * âœ… IMPORTANT:
     * áƒ”áƒ¡ URL áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒ¨áƒ”áƒœáƒ˜ áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ backend áƒ“áƒáƒ›áƒ”áƒœáƒ˜.
     * áƒ¨áƒ”áƒœáƒ¡ áƒ¡áƒ¥áƒ áƒ˜áƒœáƒ”áƒ‘áƒ–áƒ” backend áƒáƒ áƒ˜áƒ¡: https://avatarg-backend.vercel.app
     ******************************************************************/
    const API_BASE = "https://avatarg-backend.vercel.app";

    // ===== i18n =====
    const I18N = {
      ka: {
        title: "Avatar G â€” AI Workspace",
        subtitle: "Avatar â€¢ Image â€¢ Video â€¢ Voice â€¢ Music â€¢ Text",
        statusChecking: "Checking...",
        statusOnline: "Online",
        statusOffline: "Offline",
        footer: "Â© 2026 Avatar G â€¢ Georgian AI Workspace",
        demo: "áƒ“áƒáƒ˜áƒ¬áƒ§áƒ” Demo",
        creditPreview: "<strong>100 áƒ£áƒ¤áƒáƒ¡áƒ áƒ™áƒ áƒ”áƒ“áƒ˜áƒ¢áƒ˜</strong> áƒ“áƒ”áƒ›áƒ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ¨áƒ˜",
        new: "NEW",

        avatarH: "Avatar",
        avatarP: "áƒáƒ•áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ (áƒ¤áƒáƒ¢áƒ/áƒ•áƒ˜áƒ“áƒ”áƒ) + áƒ¡áƒ¢áƒ˜áƒšáƒ˜ + áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜",
        imageH: "Image",
        imageP: "áƒ¤áƒáƒ¢áƒ/áƒ“áƒ˜áƒ–áƒáƒ˜áƒœáƒ˜áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ áƒ“áƒ áƒ áƒ”áƒ“áƒáƒ¥áƒ¢áƒ˜áƒ áƒ”áƒ‘áƒ",
        videoH: "Video",
        videoP: "AI áƒ•áƒ˜áƒ“áƒ”áƒ áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ”áƒ‘áƒ˜, áƒ¨áƒáƒ áƒ¢áƒ”áƒ‘áƒ˜, áƒ áƒ˜áƒšáƒ¡áƒ”áƒ‘áƒ˜",
        voiceH: "Voice",
        voiceP: "voiceover + áƒ®áƒ›áƒ˜áƒ¡ áƒ™áƒšáƒáƒœáƒ˜áƒ áƒ”áƒ‘áƒ (áƒ—áƒáƒœáƒ®áƒ›áƒáƒ‘áƒ˜áƒ—)",
        musicH: "Music",
        musicP: "AI áƒ›áƒ£áƒ¡áƒ˜áƒ™áƒ˜áƒ¡ áƒ˜áƒ“áƒ”áƒ, áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜, mood & style",
        textH: "Text",
        textP: "áƒ™áƒáƒáƒ˜áƒ áƒáƒ˜áƒ—áƒ˜áƒœáƒ’áƒ˜, áƒáƒáƒ¡áƒ¢áƒ˜, áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜, CTA, áƒáƒ áƒáƒ›áƒ",

        modalHint: "áƒ¨áƒ”áƒáƒ•áƒ¡áƒ” áƒ“áƒ”áƒ¢áƒáƒšáƒ”áƒ‘áƒ˜ â€” áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ áƒ¬áƒáƒ•áƒ backend-áƒ–áƒ” áƒ“áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ‘ áƒáƒáƒ¡áƒ£áƒ®áƒ¡.",
        l_goal: "áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ *",
        l_lang: "áƒ”áƒœáƒ *",
        l_details: "áƒ“áƒ”áƒ¢áƒáƒšáƒ”áƒ‘áƒ˜ / áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ *",
        l_files: "áƒ¤áƒáƒ˜áƒšáƒ”áƒ‘áƒ˜ (áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜áƒ¡áƒáƒ›áƒ”áƒ‘áƒ )",
        l_notes: "áƒ¨áƒ”áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒ‘áƒ˜",
        submit: "áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ",
        clear: "áƒ’áƒáƒ¡áƒ£áƒ¤áƒ—áƒáƒ•áƒ”áƒ‘áƒ",
        consent: "áƒ•áƒáƒ“áƒáƒ¡áƒ¢áƒ£áƒ áƒ”áƒ‘, áƒ áƒáƒ› áƒ®áƒ›áƒ˜áƒ¡ áƒ™áƒšáƒáƒœáƒ˜áƒ áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒáƒ¥áƒ•áƒ¡ áƒáƒ˜áƒ áƒ˜áƒ¡/áƒáƒ•áƒ¢áƒáƒ áƒ˜áƒ¡ áƒœáƒ”áƒ‘áƒáƒ áƒ—áƒ•áƒ (consent).",
        fileText: "áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ¤áƒáƒ˜áƒšáƒ”áƒ‘áƒ˜",
        filesSelected: (n) => `${n} áƒ¤áƒáƒ˜áƒšáƒ˜ áƒáƒ áƒ©áƒ”áƒ£áƒšáƒ˜`,

        svcTitles: {
          avatar: "Avatar â€” áƒáƒ•áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ",
          image: "Image â€” áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ/áƒ áƒ”áƒ“áƒáƒ¥áƒ¢áƒ˜áƒ áƒ”áƒ‘áƒ",
          video: "Video â€” áƒ•áƒ˜áƒ“áƒ”áƒ áƒ¡áƒ¢áƒ áƒ£áƒ¥áƒ¢áƒ£áƒ áƒ/áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜",
          voice: "Voice â€” VO/Cloning (Consent)",
          music: "Music â€” áƒ›áƒ£áƒ¡áƒ˜áƒ™áƒ˜áƒ¡ áƒ˜áƒ“áƒ”áƒ",
          text: "Text â€” áƒ™áƒáƒáƒ˜áƒ áƒáƒ˜áƒ—áƒ˜áƒœáƒ’áƒ˜"
        },

        toastValidation: "âš ï¸ áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ¨áƒ”áƒáƒ•áƒ¡áƒáƒ— áƒ§áƒ•áƒ”áƒšáƒ áƒ¡áƒáƒ•áƒáƒšáƒ“áƒ”áƒ‘áƒ£áƒšáƒ áƒ•áƒ”áƒšáƒ˜.",
        toastConsent: "âš ï¸ áƒ®áƒ›áƒ˜áƒ¡ áƒ™áƒšáƒáƒœáƒ˜áƒ áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ¡áƒáƒ­áƒ˜áƒ áƒáƒ Consent.",
        toastSending: "â³ áƒ˜áƒ’áƒ–áƒáƒ•áƒœáƒ”áƒ‘áƒ...",
        toastSent: "âœ… áƒ›áƒ–áƒáƒ“áƒáƒ! áƒ›áƒ˜áƒ˜áƒ¦áƒ” áƒáƒáƒ¡áƒ£áƒ®áƒ˜ Modal-áƒ¨áƒ˜.",
        toastFail: "âŒ Failed to fetch â€” áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ” backend URL áƒ“áƒ CORS.",
        placeholders: {
          avatar: "áƒ›áƒáƒ’: áƒ¡áƒáƒ¡áƒáƒ£áƒ‘áƒ áƒ áƒáƒ•áƒáƒ¢áƒáƒ áƒ˜, áƒ‘áƒ˜áƒ–áƒœáƒ”áƒ¡ áƒ•áƒ˜áƒ“áƒ”áƒ, áƒáƒ áƒáƒ“áƒ£áƒ¥áƒ¢áƒ˜áƒ¡ pitch",
          image: "áƒ›áƒáƒ’: áƒáƒáƒ¡áƒ¢áƒ”áƒ áƒ˜, áƒšáƒáƒ’áƒáƒ¡ áƒ¨áƒ”áƒªáƒ•áƒšáƒ, áƒáƒ áƒáƒ“áƒ£áƒ¥áƒ¢áƒ˜áƒ¡ áƒ¤áƒáƒ¢áƒ",
          video: "áƒ›áƒáƒ’: 6áƒ¬ Reel, 15áƒ¬ áƒ áƒ”áƒ™áƒšáƒáƒ›áƒ, storyboard",
          voice: "áƒ›áƒáƒ’: áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ VO, áƒ›áƒ¨áƒ•áƒ˜áƒ“áƒ˜ áƒ¢áƒáƒœáƒ˜, 10áƒ¬ CTA",
          music: "áƒ›áƒáƒ’: áƒ”áƒœáƒ”áƒ áƒ’áƒ˜áƒ£áƒšáƒ˜, New Year vibe, áƒ‘áƒ áƒ”áƒœáƒ“ áƒ¯áƒ˜áƒœáƒ’áƒšáƒ˜",
          text: "áƒ›áƒáƒ’: áƒšáƒ”áƒœáƒ“áƒ˜áƒœáƒ’ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜, áƒ¡áƒáƒ—áƒáƒ£áƒ áƒ˜, CTA"
        },
        resultTitle: "AI áƒáƒáƒ¡áƒ£áƒ®áƒ˜"
      },

      en: {
        title: "Avatar G â€” AI Workspace",
        subtitle: "Avatar â€¢ Image â€¢ Video â€¢ Voice â€¢ Music â€¢ Text",
        statusChecking: "Checking...",
        statusOnline: "Online",
        statusOffline: "Offline",
        footer: "Â© 2026 Avatar G â€¢ AI Workspace",
        demo: "Start Demo",
        creditPreview: "<strong>100 Free Credits</strong> in demo mode",
        new: "NEW",

        avatarH: "Avatar",
        avatarP: "Create an avatar (photo/video) + style + script",
        imageH: "Image",
        imageP: "Generate & edit images/design",
        videoH: "Video",
        videoP: "AI video scripts, shorts, reels",
        voiceH: "Voice",
        voiceP: "Voiceover + voice cloning (with consent)",
        musicH: "Music",
        musicP: "Music idea, lyrics, mood & style",
        textH: "Text",
        textP: "Copywriting, posts, scripts, CTA, promo",

        modalHint: "Fill details â€” request goes to backend and returns a reply.",
        l_goal: "Goal *",
        l_lang: "Language *",
        l_details: "Details / Request *",
        l_files: "Files (optional)",
        l_notes: "Notes",
        submit: "Submit",
        clear: "Clear",
        consent: "I confirm I have permission/consent for voice cloning.",
        fileText: "Choose files",
        filesSelected: (n) => `${n} files selected`,

        svcTitles: {
          avatar: "Avatar â€” Create an avatar",
          image: "Image â€” Generate/Edit",
          video: "Video â€” Script/Structure",
          voice: "Voice â€” VO/Cloning (Consent)",
          music: "Music â€” Music idea",
          text: "Text â€” Copywriting"
        },

        toastValidation: "âš ï¸ Please fill all required fields.",
        toastConsent: "âš ï¸ Consent required for voice cloning.",
        toastSending: "â³ Sending...",
        toastSent: "âœ… Done! See reply in the modal.",
        toastFail: "âŒ Failed to fetch â€” check backend URL and CORS.",
        placeholders: {
          avatar: "e.g., Talking avatar, business intro, product pitch",
          image: "e.g., poster, logo tweak, product image",
          video: "e.g., 6s Reel, 15s ad, storyboard",
          voice: "e.g., Georgian VO, calm tone, 10s CTA",
          music: "e.g., upbeat, NY vibe, brand jingle",
          text: "e.g., landing copy, ad headline, CTA"
        },
        resultTitle: "AI Reply"
      }
    };

    // ===== UI refs =====
    const langSel = document.getElementById("lang");
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("closeBtn");
    const demoBtn = document.getElementById("demoBtn");
    const toast = document.getElementById("toast");

    const modalTitle = document.getElementById("modalTitleText");
    const modalIcon = document.getElementById("modalIcon");
    const modalHint = document.getElementById("modalHint");

    const serviceForm = document.getElementById("serviceForm");
    const goal = document.getElementById("goal");
    const outLang = document.getElementById("outLang");
    const details = document.getElementById("details");
    const files = document.getElementById("files");
    const fileText = document.getElementById("fileText");
    const filePreview = document.getElementById("filePreview");
    const notes = document.getElementById("notes");
    const consentWrap = document.getElementById("consentWrap");
    const consent = document.getElementById("consent");
    const clearBtn = document.getElementById("clearBtn");
    const submitBtn = document.getElementById("submitBtn");

    const resultBox = document.getElementById("resultBox");
    const resultText = document.getElementById("resultText");
    const rTitle = document.getElementById("rTitle");

    const dot = document.getElementById("dot");
    const t_status = document.getElementById("t_status");

    const cards = document.querySelectorAll(".card");

    let currentService = "avatar";

    const serviceMeta = {
      avatar: { icon: "ğŸ§‘â€ğŸ­" },
      image: { icon: "ğŸ–¼ï¸" },
      video: { icon: "ğŸ¬" },
      voice: { icon: "ğŸ¤" },
      music: { icon: "ğŸµ" },
      text: { icon: "âœï¸" }
    };

    function toastMsg(msg, type = "") {
      toast.textContent = msg;
      toast.className = "toast show";
      if (type) toast.classList.add(type);
      setTimeout(() => toast.classList.remove("show"), 2800);
    }

    function setStatus(state) {
      // state: "checking" | "online" | "offline"
      const t = I18N[langSel.value] || I18N.ka;

      dot.classList.remove("ok", "bad");
      if (state === "checking") {
        t_status.textContent = t.statusChecking;
      } else if (state === "online") {
        dot.classList.add("ok");
        t_status.textContent = t.statusOnline;
      } else {
        dot.classList.add("bad");
        t_status.textContent = t.statusOffline;
      }
    }

    async function fetchWithTimeout(url, options = {}, timeoutMs = 15000) {
      const ctrl = new AbortController();
      const id = setTimeout(() => ctrl.abort(), timeoutMs);
      try {
        const res = await fetch(url, { ...options, signal: ctrl.signal });
        return res;
      } finally {
        clearTimeout(id);
      }
    }

    async function healthCheck() {
      try {
        setStatus("checking");
        const res = await fetchWithTimeout(`${API_BASE}/api/health`, { method: "GET" }, 8000);
        if (!res.ok) throw new Error("Health not ok");
        setStatus("online");
      } catch (e) {
        setStatus("offline");
      }
    }

    // ===== Apply language =====
    function applyLang(code) {
      const t = I18N[code] || I18N.ka;
      document.documentElement.lang = code;

      document.getElementById("t_title").textContent = t.title;
      document.getElementById("t_subtitle").textContent = t.subtitle;
      document.getElementById("t_footer").innerHTML = t.footer;
      document.getElementById("t_creditPreview").innerHTML = t.creditPreview;
      demoBtn.textContent = t.demo;

      document.getElementById("b_avatar").textContent = t.new;

      document.getElementById("t_avatar_h").textContent = t.avatarH;
      document.getElementById("t_avatar_p").textContent = t.avatarP;
      document.getElementById("t_image_h").textContent = t.imageH;
      document.getElementById("t_image_p").textContent = t.imageP;
      document.getElementById("t_video_h").textContent = t.videoH;
      document.getElementById("t_video_p").textContent = t.videoP;
      document.getElementById("t_voice_h").textContent = t.voiceH;
      document.getElementById("t_voice_p").textContent = t.voiceP;
      document.getElementById("t_music_h").textContent = t.musicH;
      document.getElementById("t_music_p").textContent = t.musicP;
      document.getElementById("t_text_h").textContent = t.textH;
      document.getElementById("t_text_p").textContent = t.textP;

      modalHint.textContent = t.modalHint;
      document.getElementById("l_goal").textContent = t.l_goal;
      document.getElementById("l_lang").textContent = t.l_lang;
      document.getElementById("l_details").textContent = t.l_details;
      document.getElementById("l_files").textContent = t.l_files;
      document.getElementById("l_notes").textContent = t.l_notes;
      submitBtn.textContent = t.submit;
      clearBtn.textContent = t.clear;
      document.getElementById("t_consent").textContent = t.consent;

      rTitle.textContent = t.resultTitle;

      // update placeholders for current service
      goal.placeholder = t.placeholders[currentService] || goal.placeholder;
      // keep status text consistent
      // (we don't override setStatus state here)
    }

    langSel.addEventListener("change", (e) => applyLang(e.target.value));

    // ===== Modal =====
    function openModal(service) {
      currentService = service;
      const t = I18N[langSel.value] || I18N.ka;

      modalIcon.textContent = (serviceMeta[service]?.icon || "âœ¨");
      modalTitle.textContent = t.svcTitles[service] || "Service";

      // Consent only for voice
      if (service === "voice") consentWrap.style.display = "block";
      else {
        consentWrap.style.display = "none";
        consent.checked = false;
      }

      // reset
      resultBox.style.display = "none";
      resultText.textContent = "";

      goal.value = "";
      details.value = "";
      notes.value = "";
      files.value = "";
      filePreview.style.display = "none";
      fileText.textContent = t.fileText;

      goal.classList.remove("error");
      details.classList.remove("error");

      goal.placeholder = t.placeholders[service] || goal.placeholder;

      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden", "false");
      setTimeout(() => goal.focus(), 60);
    }

    function closeModal() {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
    }

    overlay.addEventListener("click", (e) => { if (e.target === overlay) closeModal(); });
    closeBtn.addEventListener("click", closeModal);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && overlay.classList.contains("show")) closeModal();
    });

    // Cards click + keyboard
    cards.forEach(card => {
      card.addEventListener("click", () => openModal(card.dataset.service));
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") { e.preventDefault(); openModal(card.dataset.service); }
      });
    });

    demoBtn.addEventListener("click", () => openModal("avatar"));

    // File handling
    files.addEventListener("change", function() {
      const t = I18N[langSel.value] || I18N.ka;
      const count = this.files?.length || 0;

      if (count > 0) {
        fileText.textContent = t.filesSelected(count);
        filePreview.style.display = "flex";

        const names = Array.from(this.files).slice(0, 3).map(f => f.name);
        const extra = count > 3 ? ` +${count - 3}` : "";
        filePreview.textContent = `ğŸ“ ${names.join(", ")}${extra}`;
      } else {
        fileText.textContent = t.fileText;
        filePreview.style.display = "none";
      }
    });

    clearBtn.addEventListener("click", () => {
      serviceForm.reset();
      consent.checked = false;
      resultBox.style.display = "none";
      resultText.textContent = "";
      goal.classList.remove("error");
      details.classList.remove("error");

      const t = I18N[langSel.value] || I18N.ka;
      fileText.textContent = t.fileText;
      filePreview.style.display = "none";
    });

    function validateForm() {
      const t = I18N[langSel.value] || I18N.ka;

      goal.classList.remove("error");
      details.classList.remove("error");

      let ok = true;
      if (!goal.value.trim()) { goal.classList.add("error"); ok = false; }
      if (!details.value.trim()) { details.classList.add("error"); ok = false; }

      if (!ok) { toastMsg(t.toastValidation, "warning"); return false; }
      if (currentService === "voice" && !consent.checked) { toastMsg(t.toastConsent, "warning"); return false; }

      return true;
    }

    // âœ… REAL BACKEND CALL
    async function sendToBackend(payload) {
      const res = await fetchWithTimeout(`${API_BASE}/api/ai`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      }, 20000);

      // Try parse JSON even on error
      const text = await res.text();
      let data = null;
      try { data = JSON.parse(text); } catch (_) { data = { raw: text }; }

      if (!res.ok) {
        const errMsg = data?.error || data?.message || data?.raw || `HTTP ${res.status}`;
        throw new Error(errMsg);
      }

      return data;
    }

    serviceForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const t = I18N[langSel.value] || I18N.ka;
      if (!validateForm()) return;

      submitBtn.classList.add("loading");
      submitBtn.disabled = true;
      resultBox.style.display = "none";
      resultText.textContent = "";

      toastMsg(t.toastSending, "warning");

      try {
        const payload = {
          service: currentService,
          goal: goal.value.trim(),
          outLang: outLang.value,
          details: details.value.trim(),
          notes: notes.value.trim(),
          // NOTE: áƒ¤áƒáƒ˜áƒšáƒ”áƒ‘áƒ¡ áƒáƒ¥ áƒáƒ  áƒ•áƒáƒ’áƒ–áƒáƒ•áƒœáƒ˜áƒ— (multipart áƒ¡áƒáƒ­áƒ˜áƒ áƒ áƒ˜áƒ¥áƒœáƒ”áƒ‘áƒ). Count áƒ›áƒáƒ˜áƒœáƒª áƒ’áƒáƒ•áƒáƒ¢áƒáƒœáƒ”:
          filesCount: (files.files || []).length,
          consent: currentService === "voice" ? !!consent.checked : undefined,
          // âœ… Backend-áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ "message" áƒ§áƒáƒ•áƒ”áƒšáƒ—áƒ•áƒ˜áƒ¡ áƒ“áƒáƒ•áƒ£áƒ áƒ—áƒáƒ—, áƒ áƒáƒ› áƒ¨áƒ”áƒœáƒ¡ route.js-áƒ›áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒáƒ¡
          message: `[${currentService.toUpperCase()}]\nGoal: ${goal.value.trim()}\nLang: ${outLang.value}\nDetails: ${details.value.trim()}\nNotes: ${notes.value.trim() || "-"}`
        };

        const data = await sendToBackend(payload);

        // backend áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ“áƒ”áƒ¡ reply áƒáƒœ message áƒáƒœ raw
        const reply =
          data?.reply ??
          data?.message ??
          data?.output ??
          (typeof data === "string" ? data : JSON.stringify(data, null, 2));

        resultBox.style.display = "block";
        resultText.textContent = reply;

        toastMsg(t.toastSent, "success");
      } catch (err) {
        console.error(err);
        resultBox.style.display = "block";
        resultText.textContent = `Error: ${err?.message || "Failed to fetch"}`;

        toastMsg(t.toastFail, "error");
      } finally {
        submitBtn.classList.remove("loading");
        submitBtn.disabled = false;
      }
    });

    // Home button
    document.getElementById("homeBtn").addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
    document.getElementById("homeBtn").addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") { e.preventDefault(); window.scrollTo({ top: 0, behavior: "smooth" }); }
    });

    // Init
    applyLang("ka");
    healthCheck();
  </script>
</body>
</html>
